{"ast":null,"code":"import _regeneratorRuntime from\"/home/tanisha/Desktop/Announcement-page/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/home/tanisha/Desktop/Announcement-page/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/home/tanisha/Desktop/Announcement-page/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState}from'react';import'./login.css';import swal from'sweetalert';// api\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function loginUser(_x){return _loginUser.apply(this,arguments);}function _loginUser(){_loginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(credentials){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",fetch('https://www.melivecode.com/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)}).then(function(data){return data.json();}));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _loginUser.apply(this,arguments);}export default function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return loginUser({username:username,password:password});case 3:response=_context.sent;if('accessToken'in response){swal(\"Success\",response.message,\"success\",{buttons:false,timer:2000}).then(function(value){localStorage.setItem('accessToken',response['accessToken']);localStorage.setItem('user',JSON.stringify(response['user']));window.location.href=\"/anouncement-page\";});}else{swal(\"Failed\",response.message,\"error\");}case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section mt-1\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Log in\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-group mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",class:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter your email address\",onChange:function onChange(e){return setUserName(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control\",id:\"password1\",placeholder:\"Enter your password\",onChange:function onChange(e){return setPassword(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"flex\",type:\"submit\",class:\"btn btn-primary\",children:\"Log in\"})]})]})});}","map":{"version":3,"names":["React","useState","swal","loginUser","credentials","fetch","method","headers","body","JSON","stringify","then","data","json","Login","username","setUserName","password","setPassword","handleSubmit","e","preventDefault","response","message","buttons","timer","value","localStorage","setItem","window","location","href","target"],"sources":["/home/tanisha/Desktop/Announcement-page/src/components/login.js"],"sourcesContent":["import React, {useState} from 'react'\nimport './login.css';\nimport swal from 'sweetalert';\n\n// api\nasync function loginUser(credentials) {\n  return fetch('https://www.melivecode.com/api/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(credentials)\n  })\n    .then(data => data.json())\n }\n\nexport default function Login() {\n  const [username, setUserName] = useState();\n  const [password, setPassword] = useState();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await loginUser({\n      username,\n      password\n    });\n    if ('accessToken' in response) {\n      swal(\"Success\", response.message, \"success\", {\n        buttons: false,\n        timer: 2000,\n      })\n      .then((value) => {\n        localStorage.setItem('accessToken', response['accessToken']);\n        localStorage.setItem('user', JSON.stringify(response['user']));\n        window.location.href = \"/anouncement-page\";\n      });\n    } else {\n      swal(\"Failed\", response.message, \"error\");\n    }\n  }\n  return (\n        <>\n            <div className=\"login-form mt-5\">\n                    <div className=\"section mt-1\">\n                      <h5>Log in</h5>\n                    </div>\n                    {/* Log in form */}\n                    <form onSubmit={handleSubmit}>\n                      <div class=\"form-group mt-4\">\n                        <label for=\"email\">Email</label>\n                        <input \n                          type=\"email\" \n                          class=\"form-control\" \n                          id=\"email\" \n                          aria-describedby=\"emailHelp\" \n                          placeholder=\"Enter your email address\"\n                          onChange={e => setUserName(e.target.value)}\n                          required/>\n                      </div><br></br>\n                      <div class=\"form-group\">\n                        <label for=\"password\">Password</label>\n                      <input \n                        type=\"password\" \n                        class=\"form-control\" \n                        id=\"password1\" \n                        placeholder=\"Enter your password\"\n                        onChange={e => setPassword(e.target.value)}\n                        required/>\n                     </div><br></br>\n                      <button className='flex' type=\"submit\" class=\"btn btn-primary\">Log in</button>\n                    </form>\n                    {/*Log in form */}\n            </div>\n        </>\n     \n  );\n}   \n"],"mappings":"uYAAA,MAAOA,MAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAO,aAAP,CACA,MAAOC,KAAP,KAAiB,YAAjB,CAEA;qJACeC,U,yIAAf,kBAAyBC,WAAzB,yJACSC,KAAK,CAAC,sCAAD,CAAyC,CACnDC,MAAM,CAAE,MAD2C,CAEnDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF0C,CAKnDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,WAAf,CAL6C,CAAzC,CAAL,CAOJO,IAPI,CAOC,SAAAC,IAAI,QAAIA,KAAI,CAACC,IAAL,EAAJ,EAPL,CADT,0D,4CAWA,cAAe,SAASC,MAAT,EAAiB,CAC9B,cAAgCb,QAAQ,EAAxC,wCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAAgCf,QAAQ,EAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,aAAY,4FAAG,iBAAMC,CAAN,iIACnBA,CAAC,CAACC,cAAF,GADmB,sBAEIlB,UAAS,CAAC,CAC/BY,QAAQ,CAARA,QAD+B,CAE/BE,QAAQ,CAARA,QAF+B,CAAD,CAFb,QAEbK,QAFa,eAMnB,GAAI,eAAiBA,SAArB,CAA+B,CAC7BpB,IAAI,CAAC,SAAD,CAAYoB,QAAQ,CAACC,OAArB,CAA8B,SAA9B,CAAyC,CAC3CC,OAAO,CAAE,KADkC,CAE3CC,KAAK,CAAE,IAFoC,CAAzC,CAAJ,CAICd,IAJD,CAIM,SAACe,KAAD,CAAW,CACfC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCN,QAAQ,CAAC,aAAD,CAA5C,EACAK,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BnB,IAAI,CAACC,SAAL,CAAeY,QAAQ,CAAC,MAAD,CAAvB,CAA7B,EACAO,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,mBAAvB,CACD,CARD,EASD,CAVD,IAUO,CACL7B,IAAI,CAAC,QAAD,CAAWoB,QAAQ,CAACC,OAApB,CAA6B,OAA7B,CAAJ,CACD,CAlBkB,sDAAH,kBAAZJ,aAAY,6CAAlB,CAoBA,mBACM,sCACI,aAAK,SAAS,CAAC,iBAAf,wBACQ,YAAK,SAAS,CAAC,cAAf,uBACE,8BADF,EADR,cAKQ,cAAM,QAAQ,CAAEA,YAAhB,wBACE,aAAK,KAAK,CAAC,iBAAX,wBACE,cAAO,GAAG,CAAC,OAAX,mBADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAC,cAFR,CAGE,EAAE,CAAC,OAHL,CAIE,mBAAiB,WAJnB,CAKE,WAAW,CAAC,0BALd,CAME,QAAQ,CAAE,kBAAAC,CAAC,QAAIJ,YAAW,CAACI,CAAC,CAACY,MAAF,CAASN,KAAV,CAAf,EANb,CAOE,QAAQ,KAPV,EAFF,GADF,cAWQ,aAXR,cAYE,aAAK,KAAK,CAAC,YAAX,wBACE,cAAO,GAAG,CAAC,UAAX,sBADF,cAEA,cACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAC,cAFR,CAGE,EAAE,CAAC,WAHL,CAIE,WAAW,CAAC,qBAJd,CAKE,QAAQ,CAAE,kBAAAN,CAAC,QAAIF,YAAW,CAACE,CAAC,CAACY,MAAF,CAASN,KAAV,CAAf,EALb,CAME,QAAQ,KANV,EAFA,GAZF,cAqBO,aArBP,cAsBE,eAAQ,SAAS,CAAC,MAAlB,CAAyB,IAAI,CAAC,QAA9B,CAAuC,KAAK,CAAC,iBAA7C,oBAtBF,GALR,GADJ,EADN,CAoCD"},"metadata":{},"sourceType":"module"}